<?php

return [
    /*
    |--------------------------------------------------------------------------
    | Performance Optimization Settings
    |--------------------------------------------------------------------------
    |
    | このファイルでは、アプリケーションのパフォーマンス最適化に関する
    | 設定を管理します。
    |
    */

    /*
    |--------------------------------------------------------------------------
    | Cache Settings
    |--------------------------------------------------------------------------
    |
    | キャッシュの設定
    |
    */
    'cache' => [
        'posts' => [
            'index' => 300,        // 投稿一覧: 5分
            'search' => 180,       // 検索結果: 3分
            'tag' => 180,          // タグ検索: 3分
            'category' => 180,     // カテゴリ: 3分
            'popular' => 300,      // 人気投稿: 5分
            'latest' => 300,       // 最新投稿: 5分
            'most_commented' => 300, // コメント数: 5分
        ],
        'config' => [
            'thread_categories' => 3600, // スレッドカテゴリ: 1時間
            'thread_display' => 3600,    // 表示設定: 1時間
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Database Optimization
    |--------------------------------------------------------------------------
    |
    | データベース最適化の設定
    |
    */
    'database' => [
        'sqlite' => [
            'journal_mode' => 'WAL',      // Write-Ahead Logging
            'synchronous' => 'NORMAL',    // 同期モード
            'cache_size' => 10000,        // キャッシュサイズ
            'temp_store' => 'MEMORY',     // 一時テーブルをメモリに
        ],
        'query_timeout' => 30,            // クエリタイムアウト（秒）
        'max_connections' => 100,         // 最大接続数
    ],

    /*
    |--------------------------------------------------------------------------
    | Response Optimization
    |--------------------------------------------------------------------------
    |
    | レスポンス最適化の設定
    |
    */
    'response' => [
        'compress' => true,               // レスポンス圧縮
        'minify_html' => false,          // HTML圧縮（開発環境では無効）
        'cache_headers' => true,         // キャッシュヘッダーの設定
        'performance_headers' => true,   // パフォーマンスヘッダーの設定
    ],

    /*
    |--------------------------------------------------------------------------
    | Thread Response Limit
    |--------------------------------------------------------------------------
    |
    | スレッドのレスポンス上限設定
    |
    */
    'thread' => [
        'max_responses' => 500,            // 1スレッドあたりの最大レスポンス数
        'continuation_request_threshold' => 15, // 続きスレッド作成に必要な要望数（スレッド主以外の15ユーザー+スレッド主の要望）
    ],

    /*
    |--------------------------------------------------------------------------
    | Image Optimization
    |--------------------------------------------------------------------------
    |
    | 画像最適化の設定
    |
    */
    'images' => [
        'max_width' => 800,              // 最大幅
        'max_height' => 450,             // 最大高さ
        'quality' => 80,                 // JPEG品質
        'format' => 'jpeg',              // 出力形式
        'cache' => true,                 // 画像キャッシュ
    ],

    /*
    |--------------------------------------------------------------------------
    | Monitoring
    |--------------------------------------------------------------------------
    |
    | パフォーマンス監視の設定
    |
    */
    'monitoring' => [
        'enabled' => true,               // 監視を有効化
        'slow_threshold' => 500,         // 遅いレスポンスの閾値（ミリ秒）
        'log_slow_queries' => true,      // 遅いクエリをログに記録
        'log_memory_usage' => true,      // メモリ使用量をログに記録
    ],
];
